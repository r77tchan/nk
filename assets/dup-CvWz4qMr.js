import{w as O,a as n,o as e}from"./chunk-NL6KNZEE-p2j07Jdd.js";function X({}){return[{title:"重複確認"},{name:"description",content:"----------"}]}const Y=O(function(){const[g,A]=n.useState(""),[N,C]=n.useState(""),[E,D]=n.useState(""),[W,q]=n.useState(""),[l,S]=n.useState("common"),[i,k]=n.useState("text"),[m,F]=n.useState("text"),[j,P]=n.useState(1),[w,R]=n.useState(9999),[b,_]=n.useState(1),[v,z]=n.useState(9999),[y,G]=n.useState(1),[B,H]=n.useState(1),I=async t=>{var s;const a=(s=t.target.files)==null?void 0:s[0];if(!a)return;D(a.name);const o=await a.arrayBuffer(),r=new TextDecoder("shift-jis").decode(o);A(r)},J=async t=>{var s;const a=(s=t.target.files)==null?void 0:s[0];if(!a)return;q(a.name);const o=await a.arrayBuffer(),r=new TextDecoder("shift-jis").decode(o);C(r)},K=t=>{const a=[];let o="",r=!1;for(let s=0;s<t.length;s++){const c=t[s];c==='"'?r&&t[s+1]==='"'?(o+='"',s++):r=!r:c===","&&!r?(a.push(o),o=""):o+=c}return a.push(o),a.map(s=>{let c=s.trim();return c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),c})},M=(t,a,o,r,s)=>{const c=t.split(/\r?\n/),x=new Set;if(a==="text"){const h=Math.max(0,o-1),f=Math.min(r,9999);for(const p of c){const T=p.slice(h,Math.min(f,p.length)).trim();T&&x.add(T)}return{set:x}}for(const h of c){if(!h.trim())continue;const f=K(h);if(s<1||s>f.length)return{set:new Set,error:"指定された列は存在しません"};const p=f[s-1].trim();p&&x.add(p)}return{set:x}},d=n.useMemo(()=>M(g,i,j,w,y),[g,i,j,w,y]),u=n.useMemo(()=>M(N,m,b,v,B),[N,m,b,v,B]),L=n.useMemo(()=>{if(d.error||u.error)return[];const t=d.set,a=u.set;if(l==="common"){const r=[];for(const s of t)a.has(s)&&r.push({word:s});return r}const o=[];for(const r of t)a.has(r)||o.push({word:r,from:"A"});for(const r of a)t.has(r)||o.push({word:r,from:"B"});return o},[l,d,u]);return e.jsxs("main",{className:"pt-16 p-4 container mx-auto space-y-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"重複確認"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 grid-rows-[auto_1fr]",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"areaA",className:"font-bold",children:"A"}),e.jsxs("label",{className:"block w-fit mt-1 text-sm cursor-pointer",children:[e.jsx("span",{className:"inline-block file:mr-2 rounded border border-gray-300 bg-gray-50 px-2 py-1 text-gray-700 hover:bg-gray-100",children:"ファイルを選択"}),e.jsx("input",{type:"file",accept:"text/*",onChange:I,className:"hidden"})]}),e.jsx("div",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:E||"選択されていません"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"typeA",value:"text",checked:i==="text",onChange:()=>k("text"),className:"mr-1"}),"テキスト"]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"typeA",value:"csv",checked:i==="csv",onChange:()=>k("csv"),className:"mr-1"}),"csv"]}),i==="text"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",value:j,onChange:t=>P(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1,max:9999}),e.jsx("span",{children:"~"}),e.jsx("input",{type:"number",value:w,onChange:t=>R(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1,max:9999})]}):e.jsx("input",{type:"number",value:y,onChange:t=>G(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1})]}),d.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:d.error})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"areaB",className:"font-bold",children:"B"}),e.jsxs("label",{className:"block w-fit mt-1 text-sm cursor-pointer",children:[e.jsx("span",{className:"inline-block file:mr-2 rounded border border-gray-300 bg-gray-50 px-2 py-1 text-gray-700 hover:bg-gray-100",children:"ファイルを選択"}),e.jsx("input",{type:"file",accept:"text/*",onChange:J,className:"hidden"})]}),e.jsx("div",{className:"mt-1 text-sm break-words whitespace-pre-wrap",children:W||"選択されていません"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"typeB",value:"text",checked:m==="text",onChange:()=>F("text"),className:"mr-1"}),"テキスト"]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"typeB",value:"csv",checked:m==="csv",onChange:()=>F("csv"),className:"mr-1"}),"csv"]}),m==="text"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",value:b,onChange:t=>_(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1,max:9999}),e.jsx("span",{children:"~"}),e.jsx("input",{type:"number",value:v,onChange:t=>z(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1,max:9999})]}):e.jsx("input",{type:"number",value:B,onChange:t=>H(Number(t.target.value)),className:"border w-20 px-1 py-0.5 text-right",min:1})]}),u.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:u.error})]}),e.jsx("textarea",{id:"areaA",rows:2,value:g,onChange:t=>A(t.target.value),wrap:"off",className:"w-full border p-2 rounded mt-1 overflow-x-auto whitespace-pre col-start-1 row-start-2 font-mono"}),e.jsx("textarea",{id:"areaB",rows:2,value:N,onChange:t=>C(t.target.value),wrap:"off",className:"w-full border p-2 rounded mt-1 overflow-x-auto whitespace-pre col-start-2 row-start-2 font-mono"})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",value:"common",checked:l==="common",onChange:()=>S("common"),className:"mr-1"}),"どっちにもある"]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",value:"diff",checked:l==="diff",onChange:()=>S("diff"),className:"mr-1"}),"どっちかにしかない"]})]}),e.jsx("ul",{className:"list-disc pl-6 overflow-x-auto whitespace-nowrap font-mono",children:L.map(t=>e.jsxs("li",{className:"whitespace-nowrap",children:[t.word,l==="diff"&&e.jsxs("span",{className:"text-sm text-gray-500 select-none",children:[" (",t.from,")"]})]},t.word))})]})});export{Y as default,X as meta};
